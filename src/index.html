<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account System</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header with Profile -->
        <header class="app-header">
            <div class="profile-section">
                <span id="username-display" class="username">Guest</span>
                <div id="profile-pic-container" class="profile-pic-container">
                    <img id="profile-pic" src="default-profile.png" alt="Profile" class="profile-pic">
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Auth Pages Container -->
            <div id="auth-pages" class="auth-pages">
                <!-- Login Form -->
                <div id="login-container" class="auth-form">
                    <h2>Login</h2>
                    <div class="form-group">
                        <label for="login-email">Email:</label>
                        <input type="email" id="login-email" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password:</label>
                        <input type="password" id="login-password" class="form-input" required>
                    </div>
                    <button id="login-btn" class="auth-btn primary-btn">Login</button>
                    <div class="auth-footer">
                        <p>Don't have an account? <a href="#" id="show-signup">Sign up</a></p>
                        <div class="divider">or</div>
                        <button id="google-login-btn" class="auth-btn google-btn">
                            <span class="material-icons">account_circle</span>
                            Continue with Google
                        </button>
                    </div>
                </div>

                <!-- Signup Form -->
                <div id="signup-container" class="auth-form hidden">
                    <h2>Create Account</h2>
                    <div class="form-group">
                        <label for="signup-username">Username:</label>
                        <input type="text" id="signup-username" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-email">Email:</label>
                        <input type="email" id="signup-email" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-password">Password:</label>
                        <input type="password" id="signup-password" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-confirm-password">Confirm Password:</label>
                        <input type="password" id="signup-confirm-password" class="form-input" required>
                    </div>
                    <button id="signup-btn" class="auth-btn primary-btn">Sign Up</button>
                    <div class="auth-footer">
                        <p>Already have an account? <a href="#" id="show-login">Login</a></p>
                        <div class="divider">or</div>
                        <button id="google-signup-btn" class="auth-btn google-btn">
                            <span class="material-icons">account_circle</span>
                            Continue with Google
                        </button>
                    </div>
                </div>
            </div>

            <!-- Account Management (shown after login) -->
            <div id="account-management" class="account-management hidden">
                <h2>Account Settings</h2>
                <div class="form-group">
                    <label for="username-input">Username:</label>
                    <input type="text" id="username-input" class="form-input">
                </div>
                <div class="form-group">
                    <label for="profile-pic-upload">Profile Picture:</label>
                    <input type="file" id="profile-pic-upload" accept="image/*" class="form-input">
                    <div class="image-preview-container">
                        <img id="profile-pic-preview" src="" alt="Profile Preview" class="profile-pic-preview">
                    </div>
                </div>
                <button id="save-changes-btn" class="auth-btn primary-btn">Save Changes</button>
                <button id="sign-out-btn" class="auth-btn logout-btn">Sign Out</button>
            </div>
        </main>
    </div>

    <!-- Firebase SDK (Modular Version) -->
    <script type="module">
        // Your Firebase config and initialization
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-app.js";
        import { 
            getAuth, 
            signInWithEmailAndPassword, 
            createUserWithEmailAndPassword,
            signInWithPopup,
            GoogleAuthProvider,
            signOut,
            onAuthStateChanged
        } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-auth.js";
        import { 
            getFirestore, 
            doc, 
            setDoc, 
            getDoc, 
            updateDoc, 
            serverTimestamp 
        } from "https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyADCVIINCBgvTBvClWqWI5o3SlVS47IJnw",
            authDomain: "fusioncya-cc20a.firebaseapp.com",
            projectId: "fusioncya-cc20a",
            storageBucket: "fusioncya-cc20a.appspot.com",
            messagingSenderId: "765164293111",
            appId: "1:765164293111:web:43e051c755c4690c0c3cf2"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Make auth and db available globally
        window.auth = auth;
        window.db = db;
        window.firebase = {
            auth: { signInWithEmailAndPassword, createUserWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged },
            firestore: { doc, setDoc, getDoc, updateDoc, serverTimestamp }
        };
    </script>

    <!-- Main App Script -->
    <script src="app.js"></script>
    <script src="firebase-config.js"></script>
</body>
</html>
